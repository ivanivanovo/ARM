#! /usr/bin/spf4
S" toolbox.f" INCLUDED

: .cmd ( code --)
    dup 0xFF AND 8 ROT
    8 RSHIFT 8 
    bin[ .0R space .0R ]bin
    ;

#def as sh arm-none-eabi-as -o tst.o tst.s -g
#def da sh arm-none-eabi-objdump -d tst.o 

hex[
: WIDE_OFFSET_LONG   ( offset - mask )
    DUP 800000 AND 0= IF \ J1, J2
        600000 XOR
    THEN
    DUP 7FF AND \ i11
    OVER 1FF800 AND 5 LSHIFT OR \ i10
    OVER 200000 AND A RSHIFT OR \ J2
    OVER 400000 AND 9 RSHIFT OR \ J1
    SWAP 800000 AND 3 LSHIFT OR \ S
;
]hex